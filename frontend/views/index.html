<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="Michael Stifter">
    <meta name="theme-color" content="#3fc380">

    <title>ping</title>

    <link rel="stylesheet" type="text/css" href="/public/fonts/OpenSans/OpenSans.css" />
    <link rel="stylesheet" href="/build/styles/styles.css" />

    <base href="/" />
</head>
<body>
    <header>
        <img src="/public/img/ping-logo.png" width="99" height="90"  />
    </header>

    <section class="root" id="app">
        <nav>
            <ul>
                <li v-bind:class="{ active: isActive('sites') }" v-on:click="setActive('sites')">Sites</li>
                <li v-bind:class="{ active: isActive('users') }" v-on:click="setActive('users')">Users</li>

                <li v-if="auth === null" v-on:click="showLoginModal()" class="float-right">Log in</li>
                <div v-else class="float-right dropdown">
                    <li href="#" class="dropdown-toggle" tabindex="0">{{auth.username}} <i class="icon-caret"></i></li>
                    <ul class="menu">
                      <li class="menu-item">
                          <a href="#" v-on:click="logout()">Log out</a>
                      </li>
                  </ul>
                    <!--<li v-else class="login-username"></li>-->
                </div>
            </ul>
        </nav>

        <section class="content">
            <section class="sites-container col-12" v-if="isActive('sites')">
                <div class="float-right"><button class="btn btn-primary" v-on:click="updateSites">Refresh</button></div>
                <div class="section-title"><h4>Sites</h4></div>
                <div class="section-content">
                    <div v-if="!sitesLoading">
                        <ul v-if="sites.length > 0" class="sites-list">
                            <site-item v-for="site in sites" v-bind:site="site"></site-item>
                        </ul>
                        <div v-else>
                            There are no sites created yet.
                        </div>
                    </div>
                    <div v-else class="center">
                        <button class="btn btn-link loading"></button>
                    </div>
                </div>
            </section>

            <section class="sites-container col-12" v-if="isActive('users')">
                <div class="float-right"><button class="btn btn-primary" v-on:click="updateUsers">Refresh</button></div>
                <div class="section-title"><h4>Users</h4></div>
                <div class="section-content">
                    <div v-if="!usersLoading">
                        <ul v-if="users.length > 0" class="users-list">
                            <user-item v-for="user in users" v-bind:user="user"></user-item>
                        </ul>
                        <div v-else>
                            There are no users created yet.
                        </div>
                    </div>
                    <div v-else class="center">
                        <button class="btn btn-link loading"></button>
                    </div>
                </div>
            </section>
        </section>

        <section class="modal" v-bind:class="{ active: isModalVisible() }">
            <div class="modal-overlay"></div>
            <div class="modal-container">
                <div class="modal-header">
                    <button class="btn btn-clear float-right" v-on:click="closeModal()"></button>
                    <div class="modal-title">{{modal.title}}</div>
                </div>
                <div class="modal-body">
                    <div class="content" v-html="modal.content"></div>
                </div>
                <div class="modal-footer" v-if="modal.buttons.length > 0">
                    <button v-for="button in modal.buttons" v-bind:class="button.class" v-on:click="(typeof button.action === 'function') && button.action()">{{button.display}}</button>
                </div>
            </div>
        </section>
    </section>

    <script type="text/javascript" src="/build/scripts/scripts.js"></script>
</body>
</html>